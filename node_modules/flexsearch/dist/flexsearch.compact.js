/*
 FlexSearch v0.6.22
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(v,L,N){let H;(H=N.define)&&H.amd?H([],function(){return L}):(H=N.modules)?H[v.toLowerCase()]=L:"object"===typeof exports?module.exports=L:N[v]=L})("FlexSearch",function(){function v(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:ja++;this.init(a,b);ca(this,"index",function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].f):Object.keys(this.f)});ca(this,"length",function(){return this.index.length})}function L(a){const b=D();for(const c in a)if(a.hasOwnProperty(c)){const d=
a[c];b[c]=F(d)?d.slice(0):J(d)?L(d):d}return b}function N(a,b){const c=a.length,d=O(b),e=[];for(let k=0,f=0;k<c;k++){const g=a[k];if(d&&b(g)||!d&&!b[g])e[f++]=g}return e}function H(a,b,c,d,e,k,f,g,m,l){c=da(c,f?0:e,!1,!1,b,m,l);let q;g&&(g=c.page,q=c.next,c=c.result);if(f)a=this.where(f,null,e,c);else{a=c;b=this.g;c=a.length;e=Array(c);for(k=0;k<c;k++)e[k]=b[a[k]];a=e}c=a;d&&(O(d)||(I=d.split(":"),1<I.length?d=ka:(I=I[0],d=la)),c.sort(d));return c=P(g,q,c)}function ca(a,b,c){Object.defineProperty(a,
b,{get:c})}function p(a){return new RegExp(a,"g")}function M(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function S(a,b,c,d,e,k,f,g){if(b[c])return b[c];e=e?(g-(f||g/1.5))*k+(f||g/1.5)*e:k;b[c]=e;e>=f&&(a=a[g-(e+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);return e}function W(a,b){if(a){const c=Object.keys(a);for(let d=0,e=c.length;d<e;d++){const k=c[d],f=a[k];if(f)for(let g=0,m=f.length;g<m;g++)if(f[g]===b){1===m?delete a[k]:f.splice(g,1);break}else J(f[g])&&W(f[g],b)}}}function X(a){let b=
"",c="";var d="";for(let e=0;e<a.length;e++){const k=a[e];if(k!==c)if(e&&"h"===k){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)b+=k}else b+=k;d=e===a.length-1?"":a[e+1];c=k}return b}function ma(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function la(a,b){a=a[I];b=b[I];return a<b?-1:a>b?1:0}function ka(a,b){const c=I.length;for(let d=0;d<c;d++)a=a[I[d]],b=b[I[d]];return a<b?-1:a>b?1:0}function P(a,b,c){return a?{page:a,
next:b?""+b:null,result:c}:c}function da(a,b,c,d,e,k,f){let g,m=[];if(!0===c){c="0";var l=""}else l=c&&c.split(":");const q=a.length;if(1<q){const w=D(),r=[];let x,z;var n=0,h;let E;var u=!0;let B,C=0,Y,Z,T,aa;l&&(2===l.length?(T=l,l=!1):l=aa=parseInt(l[0],10));if(f){for(x=D();n<q;n++)if("not"===e[n])for(z=a[n],E=z.length,h=0;h<E;h++)x["@"+z[h]]=1;else Z=n+1;if(Q(Z))return P(c,g,m);n=0}else Y=K(e)&&e;let U;for(;n<q;n++){const na=n===(Z||q)-1;if(!Y||!n)if((h=Y||e&&e[n])&&"and"!==h)if("or"===h)U=!1;
else continue;else U=k=!0;z=a[n];if(E=z.length){if(u)if(B){var t=B.length;for(h=0;h<t;h++){u=B[h];var y="@"+u;f&&x[y]||(w[y]=1,k||(m[C++]=u))}B=null;u=!1}else{B=z;continue}y=!1;for(h=0;h<E;h++){t=z[h];var A="@"+t;const V=k?w[A]||0:n;if(!(!V&&!d||f&&x[A]||!k&&w[A]))if(V===n){if(na){if(!aa||--aa<C)if(m[C++]=t,b&&C===b)return P(c,C+(l||0),m)}else w[A]=n+1;y=!0}else d&&(A=r[V]||(r[V]=[]),A[A.length]=t)}if(U&&!y&&!d)break}else if(U&&!d)return P(c,g,z)}if(B)if(n=B.length,f)for(h=l?parseInt(l,10):0;h<n;h++)a=
B[h],x["@"+a]||(m[C++]=a);else m=B;if(d)for(C=m.length,T?(n=parseInt(T[0],10)+1,h=parseInt(T[1],10)+1):(n=r.length,h=0);n--;)if(t=r[n]){for(E=t.length;h<E;h++)if(d=t[h],!f||!x["@"+d])if(m[C++]=d,b&&C===b)return P(c,n+":"+h,m);h=0}}else!q||e&&"not"===e[0]||(m=a[0],l&&(l=parseInt(l[0],10)));b&&(f=m.length,l&&l>f&&(l=0),l=l||0,g=l+b,g<f?m=m.slice(l,g):(g=0,l&&(m=m.slice(l))));return P(c,g,m)}function K(a){return"string"===typeof a}function F(a){return a.constructor===Array}function O(a){return"function"===
typeof a}function J(a){return"object"===typeof a}function Q(a){return"undefined"===typeof a}function ea(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=D();return b}function D(){return Object.create(null)}const G={encode:"icase",c:"forward",split:/\W+/,cache:!1,async:!1,u:!1,m:!1,a:!1,b:9,threshold:0,depth:0},fa={memory:{encode:"extra",c:"strict",threshold:0,b:1},speed:{encode:"icase",c:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",c:"full",threshold:1,b:3},score:{encode:"extra",c:"strict",
threshold:1,b:9,depth:4},balance:{encode:"balance",c:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",c:"strict",threshold:8,b:9,depth:1}},ba=[];let ja=0;const ha={},ia={};v.create=function(a,b){return new v(a,b)};v.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&ba.push(p(b),a[b]);return this};v.registerEncoder=function(a,b){R[a]=b.bind(R);return this};v.registerLanguage=function(a,b){ha[a]=b.filter;ia[a]=b.stemmer;return this};v.encode=function(a,b){return R[a](b)};v.prototype.init=
function(a,b){this.o=[];if(b){var c=b.preset;a=b}else a||(a=G),c=a.preset;b={};K(a)?(b=fa[a],a={}):c&&(b=fa[c]);this.c=a.tokenize||b.c||this.c||G.c;this.split=a.split||this.split||G.split;this.m=a.rtl||this.m||G.m;this.async="undefined"===typeof Promise||Q(c=a.async)?this.async||G.async:c;this.threshold=Q(c=a.threshold)?b.threshold||this.threshold||G.threshold:c;this.b=Q(c=a.resolution)?c=b.b||this.b||G.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth="strict"!==this.c||Q(c=a.depth)?b.depth||
this.depth||G.depth:c;this.i=(c=Q(c=a.encode)?b.encode||G.encode:c)&&R[c]&&R[c].bind(R)||(O(c)?c:this.i||!1);(c=a.matcher)&&this.addMatcher(c);if(c=(b=a.lang)||a.filter){K(c)&&(c=ha[c]);if(F(c)){var d=this.i,e=D();for(var k=0;k<c.length;k++){const g=d?d(c[k]):c[k];e[g]=1}c=e}this.filter=c}if(c=b||a.stemmer){var f;b=K(c)?ia[c]:c;d=this.i;e=[];for(f in b)b.hasOwnProperty(f)&&(k=d?d(f):f,e.push(p(k+"($|\\W)"),d?d(b[f]):b[f]));this.stemmer=f=e}this.a=d=(c=a.doc)?L(c):this.a||G.a;this.l=ea(this.b-(this.threshold||
0));this.h=D();this.f=D();if(d&&(this.g=D(),a.doc=null,f=d.index={},c=d.keys=[],b=d.field,F(d.id)||(d.id=d.id.split(":")),b)){let g;F(b)||(J(b)?(g=b,d.field=b=Object.keys(b)):d.field=b=[b]);for(d=0;d<b.length;d++)e=b[d],F(e)||(g&&(a=g[e]),c[d]=e,b[d]=e.split(":")),f[e]=new v(a),f[e].g=this.g}return this};v.prototype.encode=function(a){a&&ba.length&&(a=M(a,ba));a&&this.o.length&&(a=M(a,this.o));a&&this.i&&(a=this.i(a));a&&this.stemmer&&(a=M(a,this.stemmer));return a};v.prototype.addMatcher=function(a){const b=
this.o;for(const c in a)a.hasOwnProperty(c)&&b.push(p(c),a[c]);return this};v.prototype.add=function(a,b,c,d,e){if(this.a&&J(a))return this.j("add",a,b);if(b&&K(b)&&(a||0===a)){var k="@"+a;if(this.f[k]&&!d)return this.update(a,b);if(!e){if(this.async){let r=this;k=new Promise(function(x){setTimeout(function(){r.add(a,b,null,d,!0);r=null;x()})});if(c)k.then(c);else return k;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.c;e=O(c)?c(b):b.split(this.split);
this.filter&&(e=N(e,this.filter));const n=D();n._ctx=D();const h=e.length,u=this.threshold,t=this.depth,y=this.b,A=this.l,w=this.m;for(let r=0;r<h;r++){var f=e[r];if(f){var g=f.length,m=(w?r+1:h-r)/h,l="";switch(c){case "reverse":case "both":for(var q=g;--q;)l=f[q]+l,S(A,n,l,a,w?1:(g-q)/g,m,u,y-1);l="";case "forward":for(q=0;q<g;q++)l+=f[q],S(A,n,l,a,w?(q+1)/g:1,m,u,y-1);break;case "full":for(q=0;q<g;q++){const x=(w?q+1:g-q)/g;for(let z=g;z>q;z--)l=f.substring(q,z),S(A,n,l,a,x,m,u,y-1)}break;default:if(g=
S(A,n,f,a,1,m,u,y-1),t&&1<h&&g>=u)for(g=n._ctx[f]||(n._ctx[f]=D()),f=this.h[f]||(this.h[f]=ea(y-(u||0))),m=r-t,l=r+t+1,0>m&&(m=0),l>h&&(l=h);m<l;m++)m!==r&&S(f,g,e[m],a,0,y-(m<r?r-m:m-r),u,y-1)}}}this.f[k]=1}return this};v.prototype.j=function(a,b,c){if(F(b))for(let m=0,l=b.length;m<l;m++){if(m===l-1)return this.j(a,b[m],c);this.j(a,b[m])}else{const m=this.a.index,l=this.a.keys;var d=this.a.tag,e=this.a.id;let q;let n;for(var k=0;k<e.length;k++)q=(q||b)[e[k]];if(d){for(e=0;e<d.length;e++){var f=d[e];
var g=f.split(":");for(k=0;k<g.length;k++)n=(n||b)[g[k]];n="@"+n}g=this.s[f];g=g[n]||(g[n]=[])}if("remove"===a){delete this.g[q];for(let h=0,u=l.length;h<u;h++){if(h===u-1)return m[l[h]].remove(q,c),this;m[l[h]].remove(q)}}e=this.a.field;g&&(g[g.length]=b);this.g[q]=b;for(let h=0,u=e.length;h<u;h++){d=e[h];let t;for(f=0;f<d.length;f++)t=(t||b)[d[f]];d=m[l[h]];f="add"===a?d.add:d.update;h===u-1?f.call(d,q,t,c):f.call(d,q,t)}}return this};v.prototype.update=function(a,b,c){if(this.a&&J(a))return this.j("update",
a,b);this.f["@"+a]&&K(b)&&(this.remove(a),this.add(a,b,c,!0));return this};v.prototype.remove=function(a,b,c){if(this.a&&J(a))return this.j("remove",a,b);var d="@"+a;if(this.f[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let e=this;d=new Promise(function(k){setTimeout(function(){e.remove(a,null,!0);e=null;k()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<this.b-(this.threshold||0);b++)W(this.l[b],a);this.depth&&W(this.h,a);delete this.f[d]}return this};
let I;v.prototype.search=function(a,b,c,d){if(J(b)){if(F(b))for(var e=0;e<b.length;e++)b[e].query=a;else b.query=a;a=b;b=1E3}else b&&O(b)?(c=b,b=1E3):b||0===b||(b=1E3);let k=[],f=a;let g,m,l;if(J(a)&&!F(a)){c||(c=a.callback)&&(f.callback=null);m=a.sort;g=!1;b=a.limit;var q=a.threshold;l=!1;a=a.query}if(this.a){q=this.a.index;var n=f.bool||"or",h=f.field;let w=n;let r,x;if(h)F(h)||(h=[h]);else if(F(f)){var u=f;h=[];w=[];for(var t=0;t<f.length;t++)d=f[t],e=d.bool||n,h[t]=d.field,w[t]=e,"not"===e?r=
!0:"and"===e&&(x=!0)}else h=this.a.keys;n=h.length;for(t=0;t<n;t++)u&&(f=u[t]),g&&!K(f)&&(f.page=null,f.limit=0),k[t]=q[h[t]].search(f,0);if(c)return c(H.call(this,a,w,k,m,b,l,!1,g,x,r));if(this.async){const z=this;return new Promise(function(E){Promise.all(k).then(function(B){E(H.call(z,a,w,B,m,b,l,!1,g,x,r))})})}return H.call(this,a,w,k,m,b,l,!1,g,x,r)}q||(q=this.threshold||0);if(!d){if(this.async&&"function"!==typeof importScripts){let w=this;q=new Promise(function(r){setTimeout(function(){r(w.search(f,
b,null,!0));w=null})});if(c)q.then(c);else return q;return this}if(c)return c(this.search(f,b,null,!0)),this}if(!a||!K(a))return k;f=a;f=this.encode(f);if(!f.length)return k;c=this.c;c=O(c)?c(f):f.split(this.split);this.filter&&(c=N(c,this.filter));u=c.length;d=!0;e=[];const y=D();let A=0;1<u&&(this.depth&&"strict"===this.c?h=!0:c.sort(ma));if(!h||(n=this.h)){const w=this.b;for(;A<u;A++){let r=c[A];if(r){if(h){if(!t)if(n[r])t=r,y[r]=1;else if(!l)return k;if(l&&A===u-1&&!e.length)h=!1,r=t||r,y[r]=
0;else if(!t)continue}if(!y[r]){const x=[];let z=!1,E=0;if(t=h?n[t]:this.l){let B;for(let C=0;C<w-q;C++)if(B=t[C]&&t[C][r])x[E++]=B,z=!0}if(z)t=r,e[e.length]=1<E?x.concat.apply([],x):x[0];else{d=!1;break}y[r]=1}}}}else d=!1;d&&(k=da(e,b,g,!1));return k};v.prototype.clear=function(){return this.destroy().init()};v.prototype.destroy=function(){this.l=this.h=this.f=null;if(this.a){const a=this.a.keys;for(let b=0;b<a.length;b++)this.a.index[a[b]].destroy();this.a=this.g=null}return this};const R={icase:function(a){return a.toLowerCase()},
simple:function(){const a=[p("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",p("[\u00e8\u00e9\u00ea\u00eb]"),"e",p("[\u00ec\u00ed\u00ee\u00ef]"),"i",p("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",p("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",p("[\u00fd\u0177\u00ff]"),"y",p("\u00f1"),"n",p("[\u00e7c]"),"k",p("\u00df"),"s",p(" & ")," and ",p("[-/]")," ",p("[^a-z0-9 ]"),"",p("\\s+")," "];return function(b){b=M(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[p("ae"),"a",p("ai"),"ei",
p("ay"),"ei",p("ey"),"ei",p("oe"),"o",p("ue"),"u",p("ie"),"i",p("sz"),"s",p("zs"),"s",p("sh"),"s",p("ck"),"k",p("cc"),"k",p("th"),"t",p("dt"),"t",p("ph"),"f",p("pf"),"f",p("ou"),"o",p("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=M(b,a));c||1<b.length&&(b=X(b));return b}}(),extra:function(){const a=[p("p"),"b",p("z"),"s",p("[cgq]"),"k",p("n"),"m",p("d"),"t",p("[vw]"),"f",p("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");
for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+M(d.substring(1),a))}b=b.join(" ");b=X(b)}return b}}(),balance:function(){const a=[p("[-/]")," ",p("[^a-z0-9 ]"),"",p("\\s+")," "];return function(b){return X(M(b.toLowerCase(),a))}}()};return v}(!1),this);
